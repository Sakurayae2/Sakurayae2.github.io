<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>解决输入框选项重复 | CGin&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="
`javascript
// 输入框搜索
querySearch(queryString, cb) {
  // 获取地址列表
  var addressList = this.addressList;
  // 根据查询字符串过滤地址列表，如果没有查询字符串则返回完整地址列表
  var results = queryString
    ? addressList.f ...">
    
    <link rel="preload" href="/assets/css/0.styles.08173a00.css" as="style"><link rel="preload" href="/assets/js/app.3c9efbf1.js" as="script"><link rel="preload" href="/assets/js/6.d8bd37f8.js" as="script"><link rel="preload" href="/assets/js/3.3e03af11.js" as="script"><link rel="preload" href="/assets/js/17.cde79270.js" as="script"><link rel="prefetch" href="/assets/js/10.f111016c.js"><link rel="prefetch" href="/assets/js/11.5d0cd1e3.js"><link rel="prefetch" href="/assets/js/12.9c300c85.js"><link rel="prefetch" href="/assets/js/13.3926d780.js"><link rel="prefetch" href="/assets/js/14.420be41f.js"><link rel="prefetch" href="/assets/js/15.db67a6b9.js"><link rel="prefetch" href="/assets/js/16.eadc32d9.js"><link rel="prefetch" href="/assets/js/4.8ec5f8b2.js"><link rel="prefetch" href="/assets/js/5.027a7be3.js"><link rel="prefetch" href="/assets/js/7.5980252b.js"><link rel="prefetch" href="/assets/js/8.3645a652.js"><link rel="prefetch" href="/assets/js/9.ac065ab1.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.dbbb5117.js">
    <link rel="stylesheet" href="/assets/css/0.styles.08173a00.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">CGin's blog </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">CGin's blog </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        解决输入框选项重复
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">CGin</span> <!----></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2023-07-13">
      Thu Jul 13 2023
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/-ElmentUI" data-v-42ccfcd5><span data-v-42ccfcd5>-ElmentUI</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h4 id="解决输入框选项重复"><a href="#解决输入框选项重复" class="header-anchor">#</a> 解决输入框选项重复</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 输入框搜索</span>
<span class="token function">querySearch</span><span class="token punctuation">(</span><span class="token parameter">queryString<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取地址列表</span>
  <span class="token keyword">var</span> addressList <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>addressList<span class="token punctuation">;</span>
  <span class="token comment">// 根据查询字符串过滤地址列表，如果没有查询字符串则返回完整地址列表</span>
  <span class="token keyword">var</span> results <span class="token operator">=</span> queryString
    <span class="token operator">?</span> addressList<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createFilter</span><span class="token punctuation">(</span>queryString<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">:</span> addressList<span class="token punctuation">;</span>
  <span class="token comment">// 调用回调函数返回建议列表的数据</span>
  <span class="token function">cb</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// 创建过滤函数，根据查询字符串过滤地址</span>
<span class="token function">createFilter</span><span class="token punctuation">(</span><span class="token parameter">queryString</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">restaurant<span class="token punctuation">,</span> index<span class="token punctuation">,</span> self</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 判断地址的值是否以查询字符串开头，忽略大小写</span>
    <span class="token comment">// 同时确保返回的地址是第一次出现的（避免重复）</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      restaurant<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>queryString<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
      self<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>value <span class="token operator">===</span> restaurant<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">===</span> index
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><blockquote><p>在这里，我们使用了 Array.findIndex()方法来查找当前元素在数组中的第一个位置，如果当前位置与索引 index 相等，则说明当前元素是第一次出现，否则说明是重复项，应该被过滤掉。这样就能确保返回的列表数据中不包含重复项。</p></blockquote> <p>注释解释：</p> <p>querySearch 函数用于输入框搜索功能，接受两个参数：查询字符串 queryString 和回调函数 cb，用来返回搜索结果。
addressList 是存储地址列表的变量。
results 是用于存储搜索结果的变量，根据查询字符串进行过滤操作。
如果有查询字符串 queryString，则通过 filter 方法对 addressList 进行过滤，使用 createFilter 函数创建的过滤函数来判断是否符合过滤条件，得到过滤后的结果。
如果没有查询字符串 queryString，则直接返回完整的地址列表。
最后，调用回调函数 cb 并传入搜索结果 results，用于返回建议列表的数据。
createFilter 函数用于创建过滤函数，接受查询字符串 queryString 作为参数。
过滤函数使用箭头函数的形式定义，接受三个参数：当前的地址 restaurant、索引 index 和地址列表 self。
过滤函数判断当前地址的值是否以查询字符串开头，并且忽略大小写。
同时，还确保返回的地址是第一次出现的，通过 findIndex 方法找到第一个与当前地址值相同的地址，并判断其索引是否等于当前索引 index，如果相等则表示是第一次出现。
如果满足以上两个条件，则返回 true，表示该地址符合过滤条件，否则返回 false。</p></div> <footer><!----> <hr> <!----></footer></article> <!----></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3c9efbf1.js" defer></script><script src="/assets/js/6.d8bd37f8.js" defer></script><script src="/assets/js/3.3e03af11.js" defer></script><script src="/assets/js/17.cde79270.js" defer></script>
  </body>
</html>
